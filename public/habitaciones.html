<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habitaciones</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/estilos.css">
</head>

<body>

    <!---------------------- BARRA DE NAVEGACIÓN ---------------------->
    <header>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <div class="container">
                <a href="#" class="navbar-brand"><span class="color-hotel"><sup><img src="img/logo-empresa-removebg-preview.png" alt="" width="100" height="100"></sup>Hotel</span> Boulevard Plaza</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarS" aria-controls="navbarS" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarS">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a href="#Servicios" class="nav-link">Servicios</a>
                        </li>
                        <li class="nav-item">
                            <a href="habitaciones.html" class="nav-link">Habitaciones</a>
                        </li>
                        <li class="nav-item">
                            <a href="#contacto" class="nav-link">Contacto</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <!---------------------- FIN BARRA DE NAVEGACIÓN ---------------------->


    <!---------------------- INICIO TEXTO HABITACIONES ---------------------->
    <div class="habitaciones container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="servicios-contenedor section-header text-center text-white pb-5">
                    <h3>Resultados de Busqueda</h3>
                </div>
            </div>
        </div>
    </div>
    <!---------------------- FIN TEXTO HABITACIONES ---------------------->



<!---------------------- INICIO HABITACIONES DISPONIBLES ---------------------->
<div id="mensajeNoHabitaciones" class="container mt-4" style="display: none;">
    <p class="alert alert-warning">Lo sentimos, no se encontraron habitaciones disponibles para los criterios de búsqueda seleccionados.</p>
</div>

<div class="habitaciones-dispo container">
    <div class="cartas-habitaciones row pb-4">

        <div class="col-md-4" data-tipo="superior" data-fecha-entrada="2024-01-01" data-fecha-salida="2024-04-29" data-num-personas="5">
            <div class="card text-dark text-center bg-light p-2">
                <img src="img/home-1.jpg" alt="" class="card-img-top">
                <div class="card-body">
                    <h5 class="card-title">Habitación Superior</h5>
                    <p class="card-text">Nuestras Habitaciones Superiores cuentan con comodidades de lujo.</p>
                    <hr>
                    <p class="card-text">Desde $320 por noche</p>
                    <a href="#" class="btn btn-reservar mt-auto">Reservar</a>
                </div>
            </div>
        </div>

        <div class="col-md-4" data-tipo="simple" data-fecha-entrada="2024-01-01" data-fecha-salida="2024-03-25" data-num-personas="3">
            <div class="card text-dark text-center bg-light p-2">
                <img src="img/home-2.jpg" alt="" class="card-img-top">
                <div class="card-body">
                    <h5 class="card-title">Habitación Simple</h5>
                    <p class="card-text">Nuestras Habitaciones Simples cuentan con servicios básicos.</p>
                    <hr>
                    <p class="card-text">Desde $130 por noche</p>
                    <a href="#" class="btn btn-reservar mt-auto">Reservar</a>
                </div>
            </div>
        </div>

        <div class="col-md-4" data-tipo="doble" data-fecha-entrada="2024-01-01" data-fecha-salida="2024-04-29" data-num-personas="4">
            <div class="card text-dark text-center bg-light p-2">
                <img src="img/home-3.jpg" alt="" class="card-img-top">
                <div class="card-body">
                    <h5 class="card-title">Habitación Doble</h5>
                    <p class="card-text">Nuestras Habitaciones Dobles ofrecen espacio adicional.</p>
                    <hr>
                    <p class="card-text">Desde $250 por noche</p>
                    <a href="#" class="btn btn-reservar mt-auto">Reservar</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<!-- Script para controlar la visibilidad de las cartas -->
<script>
    $(document).ready(function () {
        // Función para obtener parámetros de la URL
        function obtenerParametroURL(nombre) {
            let url = new URL(window.location.href);
            return url.searchParams.get(nombre);
        }

        // Obtener los valores de búsqueda de la URL
        let tipoSeleccionado = obtenerParametroURL('tipoHabitacion');
        let fechaEntrada = obtenerParametroURL('fechaEntrada');
        let fechaSalida = obtenerParametroURL('fechaSalida');
        let numPersonas = obtenerParametroURL('numPersonas');

        // Ocultar todas las cartas
        $('.habitaciones-dispo .col-md-4').hide();

        // Mostrar las cartas correspondientes a la búsqueda
        $('.habitaciones-dispo .col-md-4').each(function () {
            let carta = $(this);

            // Obtener los atributos de la carta
            let cartaTipo = carta.data('tipo');
            let cartaFechaInicio = carta.data('fecha-entrada');
            let cartaFechaFin = carta.data('fecha-salida');
            let cartaNumPersonas = carta.data('num-personas');

            // Comparar con los valores del formulario
            if (
                (tipoSeleccionado === 'cualquiera' || tipoSeleccionado === cartaTipo) &&
                (cartaFechaInicio === '' || fechaEntrada >= cartaFechaInicio) &&
                (cartaFechaFin === '' || fechaSalida <= cartaFechaFin) &&
                (cartaNumPersonas === '' || numPersonas <= cartaNumPersonas)
            ) {
                carta.show();
            }
        });

        // Mostrar mensaje si no se encontraron habitaciones
        if ($('.habitaciones-dispo .col-md-4:visible').length === 0) {
            $('#mensajeNoHabitaciones').show();
        }
    });
</script>
    <!---------------------- FIN HABITACIONES DISPONIBLES ---------------------->

    <!---------------------- iNICIO FORMULARIO RESERVAR ---------------------->
    <div id="mensajeReservaExitosa" class="container mt-4 text-center" style="display: none;">
        <h4>¡Reserva Exitosa!</h4>
        <p>Su reserva ha sido confirmada. Su código de reserva es: <span id="codigoReserva"></span></p>
    </div>
    <div id="formularioReserva" class="container mt-4" style="display: none;">
        <form>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="tipoDocumento">Tipo de Documento:</label>
                        <select id="tipoDocumento" name="tipoDocumento" class="form-control" required>
                            <option value="dni">DNI</option>
                            <option value="pasaporte">Pasaporte</option>
                            <option value="cedula">Cédula</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="documento">Documento:</label>
                        <input type="text" id="documento" name="documento" class="form-control" required pattern="[0-9]{8}" title="Ingrese 8 números">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="nombre">Nombres:</label>
                        <input type="text" id="nombre" name="nombre" class="form-control" required pattern="[A-Za-zñÑáéíóúÁÉÍÓÚ\s]+" title="Ingrese solo letras">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="apellidos">Apellidos:</label>
                        <input type="text" id="apellidos" name="apellidos" class="form-control" required pattern="[A-Za-zñÑáéíóúÁÉÍÓÚ\s]+" title="Ingrese solo letras">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="telefono">Teléfono:</label>
                        <input type="tel" id="telefono" name="telefono" class="form-control" required pattern="[0-9]{9}" title="Ingrese 9 números">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="direccion">Dirección:</label>
                        <input type="text" id="direccion" name="direccion" class="form-control" required pattern=".*" title="Ingrese una dirección válida">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="fechaLlegada">Fecha de Llegada:</label>
                        <input type="date" id="fechaLlegada" name="fechaLlegada" class="form-control" required min="<?php echo date('Y-m-d'); ?>" onchange="actualizarFechaSalidaMin()">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="fechaSalida">Fecha de Salida:</label>
                        <input type="date" id="fechaSalida" name="fechaSalida" class="form-control" required min="<?php echo date('Y-m-d'); ?>">
                    </div>
                </div>
            </div>
            <div class="text-center p-3">
                <button type="submit" class="btn btn-primary" id="btnEnviarReserva">Enviar Reserva</button>
            </div>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    
    <script>
        $(document).ready(function () {
            function mostrarMensajeNoHabitaciones() {
                $('#mensajeNoHabitaciones').show();
            }
    
            // Función para mostrar/ocultar el formulario de reserva con animación
            function toggleFormularioReserva() {
                $('#formularioReserva').slideToggle();
                // Oculta el mensaje de reserva exitosa cuando se muestra el formulario
                $('#mensajeReservaExitosa').hide();
            }
    
            // Asocia la función al botón "Reservar" de cada tarjeta
            $('.btn-reservar').click(function (event) {
                event.preventDefault(); 
                toggleFormularioReserva();
            });
    
            // Manejar el envío del formulario de reserva
            $('#formularioReserva').submit(function (event) {
                event.preventDefault(); // Evitar el envío normal del formulario
    
                // Aquí agregar la lógica para procesar la reserva, generar un código, etc.
    
                // Mostrar el mensaje de reserva exitosa y el código de reserva
                $('#mensajeReservaExitosa').show();
                let codigoReserva = generarCodigoReserva();
                $('#codigoReserva').text(codigoReserva);
                
                // Otra opción: si tienes un servicio backend que maneja reservas, puedes hacer una solicitud AJAX aquí
            });
    
            function generarCodigoReserva() {
                // Lógica para generar un código de reserva (puedes personalizar según tus necesidades)
                return 'ABC123';
            }
    
            if ($('.habitaciones-dispo .col-md-4:visible').length === 0) {
                mostrarMensajeNoHabitaciones();
            }

    // Validaciones adicionales usando JavaScript
    $('#documento').on('input', function () {
        // Limitar la longitud del documento a 10 caracteres
        if ($(this).val().length > 10) {
            $(this).val($(this).val().slice(0, 10));
        }
    });
    });

    // Configurar la fecha mínima de llegada al día actual
    window.onload = function () {
        let fecha = new Date();
        let dia = fecha.getDate();
        let mes = fecha.getMonth() + 1;
        let ano = fecha.getFullYear();

        if (dia < 10) {
            dia = "0" + dia;
        }

        if (mes < 10) {
            mes = "0" + mes;
        }

        fecha = ano + "-" + mes + "-" + dia;
        document.getElementById("fechaLlegada").setAttribute("min", fecha);
    };

    // Actualizar la fecha mínima de salida al seleccionar una fecha de llegada
    function actualizarFechaSalidaMin() {
        let fechaEntrada = document.getElementById("fechaLlegada").value;
        document.getElementById("fechaSalida").setAttribute("min", fechaEntrada);
    }
    </script>

    <!---------------------- iNICIO FOOTER ---------------------->
    <footer class="footer bg-dark p-3 text-center">
        <div class="container">
            <p class="text-white">Hotel Boulevard Plaza &copy; 2024</p>
            <p class="text-white"><a href="">Inicia Sesión Admin</a></p>
            <div class="social-icons">
                <a href="https://www.facebook.com/HOTELBOULEVARDPLAZA/" class="text-white"><i class="bi bi-facebook"></i></a>
                <a href="https://youtu.be/hP8RoVnPT_g" class="text-white"><i class="bi bi-youtube"></i></a>
            </div>
        </div>
    </footer>
    <!---------------------- FIN FOOTER ---------------------->


</body>
</html>